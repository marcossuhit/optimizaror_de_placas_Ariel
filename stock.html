<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PCAMOBLAMIENTOS · Backoffice de Stock</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/jpeg" href="icons/pcicon.jpeg" />
    <link rel="apple-touch-icon" href="icons/pcicon.jpeg" />
  </head>
  <body class="stock-body">
    <main class="stock-container">
      <header class="stock-header">
        <h1>Backoffice de Stock</h1>
        <a href="#" id="closeWindowBtn" class="btn">Volver al planificador</a>
      </header>

      <section class="stock-panel admin-panel" id="adminPanel">
        <h2>Administradores</h2>
        <p class="admin-panel-description">Gestioná quién puede acceder al backoffice. Los administradores se guardan junto con el archivo de stock.</p>
        <form id="adminForm" class="admin-form">
          <div class="admin-form-grid">
            <label>
              Nombre completo
              <input id="adminNameInput" 
                     type="text" 
                     placeholder="Ej: Ana Pérez" 
                     autocomplete="name"
                     autocapitalize="words"
                     required />
            </label>
            <label>
              Correo electrónico
              <input id="adminEmailInput" 
                     type="email" 
                     placeholder="admin@ejemplo.com" 
                     autocomplete="email"
                     inputmode="email"
                     required />
            </label>
          </div>
          <div class="admin-form-actions">
            <button type="submit" class="btn primary">Agregar administrador</button>
            <button type="button" id="deleteAdminBtn" class="btn danger">Eliminar administrador</button>
          </div>
        </form>
        <div class="table-container">
          <table class="admin-table responsive-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Correo</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="adminTableBody"></tbody>
          </table>
        </div>
      </section>

      <section class="stock-panel">
        <h2>Agregar placa al stock</h2>
        <form id="stockForm" class="stock-form">
          <label>
            Material / placa
            <input id="stockMaterialInput" 
                   type="text" 
                   placeholder="Ej: MDF Blanco" 
                   autocomplete="off"
                   autocapitalize="words"
                   required />
          </label>
          <label>
            Valor por placa ($)
            <input id="stockPriceInput" 
                   type="number" 
                   min="0" 
                   step="0.01" 
                   value="0" 
                   inputmode="decimal"
                   required />
          </label>
          <div class="stock-form-actions">
            <button type="submit" class="btn primary">Guardar en stock</button>
            <button type="button" id="deleteMaterialBtn" class="btn danger">Eliminar material</button>
          </div>
        </form>
      </section>

      <section class="stock-panel">
        <h2>Listado actual</h2>
        <div class="table-container">
          <table class="stock-table responsive-table">
            <thead>
              <tr>
                <th>Material</th>
                <th>Valor $</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="stockTableBody"></tbody>
          </table>
        </div>
      </section>

      <section class="stock-panel">
        <h2>Agregar cubre canto</h2>
        <form id="edgeForm" class="stock-form">
          <label>
            Nombre / acabado
            <input id="edgeNameInput" 
                   type="text" 
                   placeholder="Ej: PVC 22mm Roble" 
                   autocomplete="off"
                   autocapitalize="words"
                   required />
          </label>
          <label>
            Valor por metro ($)
            <input id="edgePriceInput" 
                   type="number" 
                   min="0" 
                   step="0.01" 
                   value="0" 
                   inputmode="decimal"
                   required />
          </label>
          <div class="stock-form-actions">
            <button type="submit" class="btn primary">Guardar cubre canto</button>
            <button type="button" id="deleteEdgeBtn" class="btn danger">Eliminar cubre canto</button>
          </div>
        </form>
      </section>

      <section class="stock-panel">
        <h2>Listado de cubre cantos</h2>
        <div class="table-container">
          <table class="stock-table responsive-table">
            <thead>
              <tr>
                <th>Cubre canto</th>
                <th>Valor $/m</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="edgeTableBody"></tbody>
          </table>
        </div>
      </section>

      <section class="stock-actions-panel">
        <div class="stock-actions">
          <div class="stock-actions-buttons">
            <button id="downloadStockBtn" class="btn">Descargar stock.txt</button>
            <label class="btn btn-secondary" for="importStockInput">Importar stock.txt</label>
            <input id="importStockInput" type="file" accept="text/plain" style="display:none" />
          </div>
          <button id="clearStockBtn" class="btn danger">Vaciar stock</button>
        </div>
      </section>
    </main>

    <script src="stock-sync-config.js"></script>
    <script src="stock-sync.js"></script>
    <script src="auth.js"></script>
    <script src="mobile-utils.js"></script>
    <script src="stock.js"></script>
  </body>
</html>
